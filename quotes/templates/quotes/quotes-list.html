{% extends 'quotes/base.html' %}

{% block title %}Quotes list{% endblock %}

{% block content %}
    {% if category %}
        <h1>Quotes in category <strong>"{{ category }}"</strong></h1>
    {% elif book %}
        <h1>Quotes in <strong>"{{ book }}"</strong></h1>
    {% elif author %}
        <h1>Quotes by <strong>"{{ author }}"</strong></h1>
    {% elif tag %}
        <h1>Quotes with tag <strong>"#{{ tag }}"</strong></h1>
    {% else %}
        <h1>Quotes</h1>
    {% endif %} 

    {% if quotes %}
        <div class="row large-up-4">
            {% for quote in quotes %}
                <div class="column column-block">
                    <div class="quote">
                        <time>
                            {{ quote.date | date:"M d, Y" }}
                        </time>

                        <blockquote>
                            <a href="{% url 'quotes:quote-detail' pk=quote.id slug=quote.slug %}">{{ quote.text | truncatewords:10 }}</a>
                        </blockquote>
                    
                        {% if quote.author %}
                            <cite>
                                <a href="{% url 'quotes:quotes-list' author=quote.author.slug %}">{{ quote.author.name }}</a>
                            </cite>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>

        {% if is_paginated %}
            <ul class="pagination text-center" role="navigation" aria-label="Pagination">
                {% if page_obj.has_previous %}
                    <li class="pagination-previous">
                        <a href="{% url 'quotes:quotes-list' %}?page={{ page_obj.previous_page_number }}">Previous</a>
                    </li>
                {% endif %}
                <li class="current">
                    <span class="page-current">
                        {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}
                    </span>
                </li>
                {% if page_obj.has_next %}
                    <li class="pagination-next">
                        <a href="{% url 'quotes:quotes-list' %}?page={{ page_obj.next_page_number }}">Next</a>
                    </li>
                {% endif %}
            </ul>
        {% endif %}
    {% else %}
        <p>No quotes.</p>
    {% endif %}
{% endblock %}
